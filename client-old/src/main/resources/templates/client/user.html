<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang cá nhân</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/style.css}" />
    <link rel="stylesheet" th:href="@{/css/shop.css}" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--bg-color, #f5f7fa);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            min-height: 100vh;
            padding: 0;
        }

        .user-page-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* Header Section */
        .user-header {
            background: linear-gradient(135deg, var(--primary-color, #ff7a45) 0%, var(--hover-color, #ff6b35) 100%);
            border-radius: var(--radius-lg, 16px);
            padding: 48px 40px;
            margin-bottom: 32px;
            box-shadow: 0 8px 32px rgba(255, 122, 69, 0.25);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .user-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 400px;
            height: 400px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            filter: blur(80px);
        }

        .user-header-content {
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            gap: 32px;
            flex-wrap: wrap;
        }

        .user-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 4px solid rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: white;
            flex-shrink: 0;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }

        .user-info-header {
            flex: 1;
            min-width: 250px;
        }

        .user-info-header h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
            color: white;
        }

        .user-info-header .user-email {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 16px;
        }

        .roles-badge-header {
            display: inline-flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .role-badge-header {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
        }

        /* Alert Messages */
        .alert {
            padding: 16px 20px;
            border-radius: var(--radius-md, 12px);
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .alert-warning {
            background: var(--warning-light, #fff3cd);
            border: 1px solid var(--warning-color, #ffc107);
            color: var(--warning-color, #856404);
        }

        .alert-success {
            background: #d4edda;
            border: 1px solid #28a745;
            color: #155724;
        }

        /* Main Content Grid */
        .user-content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        /* Card Styles */
        .user-card {
            background: var(--card-bg, #ffffff);
            border-radius: var(--radius-lg, 16px);
            padding: 32px;
            box-shadow: var(--shadow-1, 0 2px 8px rgba(0, 0, 0, 0.08));
            border: 1px solid var(--border-color, #e0e0e0);
            transition: all 0.3s ease;
        }

        .user-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-2, 0 8px 24px rgba(0, 0, 0, 0.12));
        }

        .user-card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--border-color, #e0e0e0);
        }

        .user-card-header i {
            font-size: 24px;
            color: var(--primary-color, #ff7a45);
        }

        .user-card-header h2 {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-color, #1a1a1a);
            margin: 0;
        }

        /* Info Item */
        .info-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color, #f0f0f0);
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .info-item i {
            width: 24px;
            color: var(--primary-color, #ff7a45);
            font-size: 16px;
        }

        .info-item-label {
            font-weight: 600;
            color: var(--text-color, #1a1a1a);
            min-width: 120px;
        }

        .info-item-value {
            color: var(--text-secondary, #666);
            flex: 1;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .action-btn {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            border-radius: var(--radius-md, 12px);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 15px;
        }

        .action-btn i {
            font-size: 18px;
        }

        .action-btn-primary {
            background: linear-gradient(135deg, var(--primary-color, #ff7a45) 0%, var(--hover-color, #ff6b35) 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(255, 122, 69, 0.3);
        }

        .action-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 122, 69, 0.4);
        }

        .action-btn-secondary {
            background: var(--card-bg, #ffffff);
            color: var(--text-color, #1a1a1a);
            border: 2px solid var(--border-color, #e0e0e0);
        }

        .action-btn-secondary:hover {
            background: var(--bg-color, #f5f7fa);
            border-color: var(--primary-color, #ff7a45);
            color: var(--primary-color, #ff7a45);
        }

        .action-btn-danger {
            background: #fff5f5;
            color: #dc3545;
            border: 2px solid #fecaca;
        }

        .action-btn-danger:hover {
            background: #fee2e2;
            border-color: #dc3545;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 24px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(255, 122, 69, 0.1) 0%, rgba(255, 107, 53, 0.05) 100%);
            border-radius: var(--radius-md, 12px);
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 122, 69, 0.2);
        }

        .stat-card-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary-color, #ff7a45);
            margin-bottom: 8px;
        }

        .stat-card-label {
            font-size: 14px;
            color: var(--text-secondary, #666);
            font-weight: 500;
        }

        /* Welcome Section */
        .welcome-section {
            background: linear-gradient(135deg, rgba(255, 122, 69, 0.05) 0%, rgba(255, 107, 53, 0.02) 100%);
            border-radius: var(--radius-lg, 16px);
            padding: 32px;
            border: 1px solid rgba(255, 122, 69, 0.1);
        }

        .welcome-section h3 {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-color, #1a1a1a);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .welcome-section h3 i {
            color: var(--primary-color, #ff7a45);
        }

        .welcome-section p {
            color: var(--text-secondary, #666);
            line-height: 1.8;
            margin-bottom: 16px;
        }

        .admin-notice {
            margin-top: 20px;
            padding: 16px 20px;
            background: rgba(255, 122, 69, 0.1);
            border-radius: var(--radius-md, 12px);
            border-left: 4px solid var(--primary-color, #ff7a45);
            display: flex;
            align-items: start;
            gap: 12px;
        }

        .admin-notice i {
            color: var(--primary-color, #ff7a45);
            font-size: 20px;
            margin-top: 2px;
        }

        .admin-notice-content {
            flex: 1;
        }

        .admin-notice-content strong {
            color: var(--primary-color, #ff7a45);
            display: block;
            margin-bottom: 4px;
        }

        .admin-notice-content span {
            color: var(--text-secondary, #666);
            font-size: 14px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .user-page-container {
                padding: 20px 16px;
            }

            .user-header {
                padding: 32px 24px;
            }

            .user-header-content {
                flex-direction: column;
                text-align: center;
            }

            .user-info-header {
                text-align: center;
            }

            .user-content-grid {
                grid-template-columns: 1fr;
            }

            .user-card {
                padding: 24px;
            }
        }

        /* Dark Mode Support */
        @media (prefers-color-scheme: dark) {
            .user-header {
                background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            }

            .stat-card {
                background: rgba(255, 255, 255, 0.05);
                border-color: rgba(255, 255, 255, 0.1);
            }
        }
    </style>
</head>
<body>
    <div th:replace="~{client/fragments/header :: client-header(${username})}"></div>

    <div class="user-page-container">
        <!-- Alert Messages -->
        <div th:if="${errorMessage}" class="alert alert-warning">
            <i class="fas fa-exclamation-triangle"></i>
            <span th:text="${errorMessage}"></span>
        </div>

        <div th:if="${successMessage}" class="alert alert-success">
            <i class="fas fa-check-circle"></i>
            <span th:text="${successMessage}"></span>
        </div>

        <!-- Header Section -->
        <div class="user-header">
            <div class="user-header-content">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-info-header">
                    <h1 th:text="${username}">User</h1>
                    <div class="user-email" th:text="${username}">email@example.com</div>
                    <div class="roles-badge-header" th:if="${!roles.isEmpty()}">
                        <span class="role-badge-header" th:each="role : ${roles}" th:text="${role}">ROLE</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="user-content-grid">
            <!-- Profile Information Card -->
            <div class="user-card">
                <div class="user-card-header">
                    <i class="fas fa-user-circle"></i>
                    <h2>Thông tin cá nhân</h2>
                </div>
                <div class="info-item">
                    <i class="fas fa-user"></i>
                    <span class="info-item-label">Tên đăng nhập:</span>
                    <span class="info-item-value" th:text="${username}">-</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-envelope"></i>
                    <span class="info-item-label">Email:</span>
                    <span class="info-item-value" th:text="${username}">-</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-shield-alt"></i>
                    <span class="info-item-label">Vai trò:</span>
                    <div class="info-item-value">
                        <div class="roles-badge-header" th:if="${!roles.isEmpty()}">
                            <span class="role-badge-header" th:each="role : ${roles}" th:text="${role}">ROLE</span>
                        </div>
                        <span th:if="${roles.isEmpty()}">-</span>
                    </div>
                </div>
                <div class="info-item">
                    <i class="fas fa-check-circle"></i>
                    <span class="info-item-label">Trạng thái:</span>
                    <span class="info-item-value" style="color: #28a745;">Hoạt động</span>
                </div>
            </div>

            <!-- Quick Actions Card -->
            <div class="user-card">
                <div class="user-card-header">
                    <i class="fas fa-bolt"></i>
                    <h2>Thao tác nhanh</h2>
                </div>
                <div class="action-buttons">
                    <a th:if="${isAdmin}" th:href="@{/users}" class="action-btn action-btn-primary">
                        <i class="fas fa-cog"></i>
                        <span>Trang quản trị</span>
                    </a>
                    <button class="action-btn action-btn-secondary" onclick="alert('Tính năng đang phát triển')">
                        <i class="fas fa-edit"></i>
                        <span>Cập nhật thông tin</span>
                    </button>
                    <button class="action-btn action-btn-secondary" onclick="alert('Tính năng đang phát triển')">
                        <i class="fas fa-key"></i>
                        <span>Đổi mật khẩu</span>
                    </button>
                    <a th:href="@{/logout}" class="action-btn action-btn-danger">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Đăng xuất</span>
                    </a>
                </div>
            </div>

            <!-- Statistics Card (Placeholder) -->
            <div class="user-card">
                <div class="user-card-header">
                    <i class="fas fa-chart-bar"></i>
                    <h2>Thống kê</h2>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-card-value">0</div>
                        <div class="stat-card-label">Đơn hàng</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-value">0</div>
                        <div class="stat-card-label">Sản phẩm yêu thích</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-value">0</div>
                        <div class="stat-card-label">Đánh giá</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Welcome Section -->
        <div class="user-card welcome-section">
            <h3>
                <i class="fas fa-hand-spock"></i>
                Chào mừng trở lại, <span th:text="${username}">User</span>!
            </h3>
            <p>
                Đây là trang cá nhân của bạn. Tại đây bạn có thể xem thông tin tài khoản, 
                quản lý cài đặt và truy cập các tính năng dành cho người dùng.
            </p>
            <p th:if="${isAdmin}" class="admin-notice">
                <i class="fas fa-info-circle"></i>
                <div class="admin-notice-content">
                    <strong>Bạn có quyền quản trị viên</strong>
                    <span>Nhấn vào nút "Trang quản trị" ở trên để truy cập các tính năng quản lý hệ thống.</span>
                </div>
            </p>
        </div>
    </div>
</body>
</html>
